import{s as r}from"./supabase.Bouij7RW.js";import"./_commonjsHelpers.gnU0ypJ3.js";import"./preload-helper.BlTxHScW.js";let n=null,o=!1,e=null;const d=async()=>{if(o){console.log("Auth ya está inicializado");return}console.log("Inicializando auth..."),o=!0,e&&e.unsubscribe();const{data:{subscription:t}}=r.auth.onAuthStateChange((a,i)=>{console.log("Cambio de estado de autenticación:",a,i),n&&n(i)});return e=t,window.addEventListener("unload",()=>{e&&e.unsubscribe(),o=!1,n=null}),l()},l=async()=>{try{console.log("Verificando estado de autenticación...");const{data:{session:t},error:a}=await r.auth.getSession();return a?(console.error("Error al obtener la sesión:",a),null):(console.log("Sesión actual:",t),n&&n(t),t)}catch(t){return console.error("Error al verificar autenticación:",t),null}};export{l as checkAuth,d as initAuth};
